import{a as S,f as H,t as O}from"../chunks/BHnUeLfg.js";import{i as le}from"../chunks/BZyZ3sR9.js";import{ae as oe,af as ie,u as g,r as ve,h as ne,V as b,ag as ce,O as ue,ah as de,ai as pe,ad as P,m as a,Q as me,T as i,R as p,o as m,U as o,aj as fe,a3 as k}from"../chunks/mra9ftPF.js";import{s as Q}from"../chunks/PaQDFcYx.js";import{i as _e}from"../chunks/BHq0IYa-.js";import{e as he,r as X,i as be,a as ke,b as ge}from"../chunks/Db2YuAzI.js";import{e as B}from"../chunks/D1USUX2b.js";import{s as ye,a as xe}from"../chunks/BGwb_7VU.js";import{s as Ee}from"../chunks/B2R-KUoo.js";import{l as Se}from"../chunks/BeJFB7-l.js";import{g as q,b as z}from"../chunks/DiRRdz5w.js";import"../chunks/DcUTAHAx.js";import{C as $e}from"../chunks/Dq63f4rX.js";function G(e,c,f=c){var _=new WeakSet;oe(e,"input",async d=>{var l=d?e.defaultValue:e.value;if(l=C(e)?W(l):l,f(l),b!==null&&_.add(b),await ie(),l!==(l=c())){var y=e.selectionStart,v=e.selectionEnd,u=e.value.length;if(e.value=l??"",v!==null){var r=e.value.length;y===v&&v===u&&r>u?(e.selectionStart=r,e.selectionEnd=r):(e.selectionStart=y,e.selectionEnd=Math.min(v,r))}}}),(ne&&e.defaultValue!==e.value||g(c)==null&&e.value)&&(f(C(e)?W(e.value):e.value),b!==null&&_.add(b)),ve(()=>{var d=c();if(e===document.activeElement){var l=ce??b;if(_.has(l))return}C(e)&&d===W(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}function C(e){var c=e.type;return c==="number"||c==="range"}function W(e){return e===""?null:+e}var De=H('<button><div class="avatar svelte-97pk1e"> </div> <span class="name svelte-97pk1e"> </span></button>'),Te=H('<div class="page-container svelte-97pk1e"><header class="svelte-97pk1e"><button class="icon-btn svelte-97pk1e"><!></button> <h1 class="svelte-97pk1e">Add Expense</h1> <div class="spacer svelte-97pk1e"></div></header> <main class="svelte-97pk1e"><div class="input-group amount-group svelte-97pk1e"><span class="currency svelte-97pk1e">$</span> <input type="number" placeholder="0.00" class="amount-input svelte-97pk1e"/></div> <div class="input-group svelte-97pk1e"><input type="text" placeholder="What is this for?" class="text-input svelte-97pk1e"/></div> <div class="split-section svelte-97pk1e"><h3 class="svelte-97pk1e">Split with...</h3> <div class="users-grid svelte-97pk1e"></div></div></main> <footer class="svelte-97pk1e"><button class="btn-vortex svelte-97pk1e"><!></button></footer></div>');function Qe(e,c){ue(c,!1);const f=()=>xe(Ee,"$store",_),[_,d]=ye(),l=k(),y=[{id:"alice",name:"Alice",color:"#ec4899"},{id:"bob",name:"Bob",color:"#ef4444"},{id:"charlie",name:"Charlie",color:"#eab308"},{id:"david",name:"David",color:"#22c55e"}];let v=k(""),u=k(""),r=k([]),h=k(!1);function J(t){a(r).includes(t)?m(r,a(r).filter(s=>s!==t)):m(r,[...a(r),t])}async function K(){var t,s;if(!(!a(v)||!a(u)||a(r).length===0)){m(h,!0);try{const n=[(t=a(l))==null?void 0:t.uid,...a(r)].filter(Boolean),E={payerId:(s=a(l))==null?void 0:s.uid,amount:parseFloat(a(v)),description:a(u),splitWith:n,timestamp:Date.now()};await Se("ADD_EXPENSE",E),q(`${z}/dashboard`)}catch(n){console.error(n),m(h,!1)}}}function L(){q(`${z}/dashboard`)}de(()=>f(),()=>{m(l,f().auth.user)}),pe(),le();var $=Te(),D=i($),T=i(D),Y=i(T);$e(Y,{}),o(T),fe(4),o(D);var U=p(D,2),V=i(U),F=p(i(V),2);X(F),o(V);var w=p(V,2),I=i(w);X(I),o(w);var N=p(w,2),R=p(i(N),2);he(R,5,()=>y,be,(t,s)=>{var n=De();let E;var A=i(n),te=i(A,!0);o(A);var M=p(A,2),se=i(M,!0);o(M),o(n),P(re=>{E=ke(n,1,"user-chip svelte-97pk1e",null,E,re),ge(n,`--user-color: ${a(s),g(()=>a(s).color)??""}`),Q(te,(a(s),g(()=>a(s).name[0]))),Q(se,(a(s),g(()=>a(s).name)))},[()=>({selected:a(r).includes(a(s).id)})]),B("click",n,()=>J(a(s).id)),S(t,n)}),o(R),o(N),o(U);var j=p(U,2),x=i(j),Z=i(x);{var ee=t=>{var s=O("Sending...");S(t,s)},ae=t=>{var s=O("Throw into Vortex");S(t,s)};_e(Z,t=>{a(h)?t(ee):t(ae,!1)})}o(x),o(j),o($),P(()=>x.disabled=(a(v),a(u),a(r),a(h),g(()=>!a(v)||!a(u)||a(r).length===0||a(h)))),B("click",T,L),G(F,()=>a(v),t=>m(v,t)),G(I,()=>a(u),t=>m(u,t)),B("click",x,K),S(e,$),me(),d()}export{Qe as component};
