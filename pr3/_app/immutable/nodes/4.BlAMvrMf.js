import{a as S,f as J,t as X}from"../chunks/Bmj0PmUK.js";import"../chunks/BXY8mwAH.js";import{ac as re,ad as le,u as g,r as oe,h as ie,R as b,ae as ve,a6 as ce,af as ne,ag as ue,a7 as j,m as a,a8 as de,a9 as i,ab as p,o as m,aa as o,ah as pe,a0 as k}from"../chunks/9Y9rDYax.js";import{s as q}from"../chunks/CuUxtOoW.js";import{i as me}from"../chunks/BtpUgM9C.js";import{e as fe,r as z,i as _e,a as he,b as be}from"../chunks/BB8SYtfv.js";import{e as U}from"../chunks/DBHRyS1n.js";import{i as ke}from"../chunks/D8uZUpcf.js";import{s as ge,a as ye}from"../chunks/DZe_NpQR.js";import{s as xe}from"../chunks/B2R-KUoo.js";import{l as Ee}from"../chunks/DehJPUGh.js";import{g as G}from"../chunks/Ds7fTFb8.js";import"../chunks/BUmc1xIs.js";import{C as Se}from"../chunks/DeYLOleU.js";function H(e,n,f=n){var _=new WeakSet;re(e,"input",async d=>{var l=d?e.defaultValue:e.value;if(l=V(e)?W(l):l,f(l),b!==null&&_.add(b),await le(),l!==(l=n())){var y=e.selectionStart,v=e.selectionEnd,u=e.value.length;if(e.value=l??"",v!==null){var r=e.value.length;y===v&&v===u&&r>u?(e.selectionStart=r,e.selectionEnd=r):(e.selectionStart=y,e.selectionEnd=Math.min(v,r))}}}),(ie&&e.defaultValue!==e.value||g(n)==null&&e.value)&&(f(V(e)?W(e.value):e.value),b!==null&&_.add(b)),oe(()=>{var d=n();if(e===document.activeElement){var l=ve??b;if(_.has(l))return}V(e)&&d===W(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}function V(e){var n=e.type;return n==="number"||n==="range"}function W(e){return e===""?null:+e}var $e=J('<button><div class="avatar svelte-97pk1e"> </div> <span class="name svelte-97pk1e"> </span></button>'),De=J('<div class="page-container svelte-97pk1e"><header class="svelte-97pk1e"><button class="icon-btn svelte-97pk1e"><!></button> <h1 class="svelte-97pk1e">Add Expense</h1> <div class="spacer svelte-97pk1e"></div></header> <main class="svelte-97pk1e"><div class="input-group amount-group svelte-97pk1e"><span class="currency svelte-97pk1e">$</span> <input type="number" placeholder="0.00" class="amount-input svelte-97pk1e"/></div> <div class="input-group svelte-97pk1e"><input type="text" placeholder="What is this for?" class="text-input svelte-97pk1e"/></div> <div class="split-section svelte-97pk1e"><h3 class="svelte-97pk1e">Split with...</h3> <div class="users-grid svelte-97pk1e"></div></div></main> <footer class="svelte-97pk1e"><button class="btn-vortex svelte-97pk1e"><!></button></footer></div>');function qe(e,n){ce(n,!1);const f=()=>ye(xe,"$store",_),[_,d]=ge(),l=k(),y=[{id:"alice",name:"Alice",color:"#ec4899"},{id:"bob",name:"Bob",color:"#ef4444"},{id:"charlie",name:"Charlie",color:"#eab308"},{id:"david",name:"David",color:"#22c55e"}];let v=k(""),u=k(""),r=k([]),h=k(!1);function K(t){a(r).includes(t)?m(r,a(r).filter(s=>s!==t)):m(r,[...a(r),t])}async function L(){var t,s;if(!(!a(v)||!a(u)||a(r).length===0)){m(h,!0);try{const c=[(t=a(l))==null?void 0:t.uid,...a(r)].filter(Boolean),E={payerId:(s=a(l))==null?void 0:s.uid,amount:parseFloat(a(v)),description:a(u),splitWith:c,timestamp:Date.now()};await Ee("ADD_EXPENSE",E),G("/dashboard")}catch(c){console.error(c),m(h,!1)}}}function O(){G("/dashboard")}ne(()=>f(),()=>{m(l,f().auth.user)}),ue(),ke();var $=De(),D=i($),w=i(D),Q=i(w);Se(Q,{}),o(w),pe(4),o(D);var A=p(D,2),B=i(A),F=p(i(B),2);z(F),o(B);var C=p(B,2),I=i(C);z(I),o(C);var N=p(C,2),R=p(i(N),2);fe(R,5,()=>y,_e,(t,s)=>{var c=$e();let E;var T=i(c),ae=i(T,!0);o(T);var P=p(T,2),te=i(P,!0);o(P),o(c),j(se=>{E=he(c,1,"user-chip svelte-97pk1e",null,E,se),be(c,`--user-color: ${a(s),g(()=>a(s).color)??""}`),q(ae,(a(s),g(()=>a(s).name[0]))),q(te,(a(s),g(()=>a(s).name)))},[()=>({selected:a(r).includes(a(s).id)})]),U("click",c,()=>K(a(s).id)),S(t,c)}),o(R),o(N),o(A);var M=p(A,2),x=i(M),Y=i(x);{var Z=t=>{var s=X("Sending...");S(t,s)},ee=t=>{var s=X("Throw into Vortex");S(t,s)};me(Y,t=>{a(h)?t(Z):t(ee,!1)})}o(x),o(M),o($),j(()=>x.disabled=(a(v),a(u),a(r),a(h),g(()=>!a(v)||!a(u)||a(r).length===0||a(h)))),U("click",w,O),H(F,()=>a(v),t=>m(v,t)),H(I,()=>a(u),t=>m(u,t)),U("click",x,L),S(e,$),de(),d()}export{qe as component};
